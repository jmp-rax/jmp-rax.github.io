<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Serial Peripheral Interface" /><meta property="og:locale" content="en" /><meta name="description" content="This article is a personal note I took to help remember the gist of SPI" /><meta property="og:description" content="This article is a personal note I took to help remember the gist of SPI" /><link rel="canonical" href="https://jmp-rax.github.io/posts/serial-peripheral-interface/" /><meta property="og:url" content="https://jmp-rax.github.io/posts/serial-peripheral-interface/" /><meta property="og:site_name" content="JMP_RAX" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-10T22:22:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Serial Peripheral Interface" /><meta name="twitter:site" content="@jmp_rax" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"headline":"Serial Peripheral Interface","dateModified":"2022-01-10T22:22:00-05:00","datePublished":"2022-01-10T22:22:00-05:00","description":"This article is a personal note I took to help remember the gist of SPI","url":"https://jmp-rax.github.io/posts/serial-peripheral-interface/","mainEntityOfPage":{"@type":"WebPage","@id":"https://jmp-rax.github.io/posts/serial-peripheral-interface/"},"@type":"BlogPosting","@context":"https://schema.org"}</script><title>Serial Peripheral Interface | JMP_RAX</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="JMP_RAX"><meta name="application-name" content="JMP_RAX"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">JMP_RAX</a></div><div class="site-subtitle font-italic">My dev blog and musings</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/jmp-rax" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/jmp_rax" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['pop.rax.jmp.rax','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Serial Peripheral Interface</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Serial Peripheral Interface</h1><div class="post-meta text-muted"><div> By <em> <a href="https://twitter.com/username">jmp_rax</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-01-10 22:22:00 -0500" data-toggle="tooltip" data-placement="bottom" title="Mon, Jan 10, 2022, 10:22 PM -0500" >Jan 10</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="611 words"> <em>3 min</em> read</span></div></div></div><div class="post-content"><blockquote><p>This article is a personal note I took to help remember the gist of SPI</p></blockquote><h1 id="spi">SPI</h1><p><strong>Serial Peripheral Interface</strong></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>&gt;&gt; Traditional 4wire SPI &lt;&lt; 

Data being written
cs ‾‾‾‾|__________________|‾‾‾‾‾‾‾‾ cs

Tx        0 1 0 1 0 1 0 1
mosi ‾‾‾|_|‾|_|‾|_|‾|_|‾‾‾‾‾‾‾‾‾‾‾‾‾ sdi

Rx        1 0 1 0 1 0 1 0 
miso ‾‾‾‾‾‾|_|‾|_|‾|_|‾|_|‾‾‾‾‾‾‾‾‾‾ sdo

clock pulse
sck ‾|_|‾|_|‾|_|‾|_|‾|_|‾|_|‾|_|‾|_ sck
</pre></table></code></div></div><h2 id="overview">Overview<a href="#overview" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><blockquote><p>Serial peripheral interface (SPI) is one of the most widely used interfaces between microcontroller and peripheral ICs such as sensors, ADCs, DACs, shift registers, SRAM, and others. This article provides a brief description of the SPI interface followed by an introduction to Analog Devices’ SPI enabled switches and muxes, and how they help reduce the number of digital GPIOs in system board design.</p><p><cite> https://www.analog.com/en/analog-dialogue/articles/introduction-to-spi-interface.html</cite></p></blockquote><p>Traditional 4 wire SPI has four signals</p><ul><li>Clock (CLK)<li>Chip Select (CS)<li>Master out, Slave In (MOSI)<li>Master In, Slave Out (MISO)</ul><h2 id="clock-signal">Clock Signal<a href="#clock-signal" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>The clock signal is generated by the <em>master</em> and the <em>slave</em> is synchronized to the <em>master</em>. SPI Devices support much higher clock frequencies compared to I<sup>2</sup>C. Product data sheets should specify supported frequencies.</p><h2 id="chip-select">Chip Select<a href="#chip-select" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Chip select is used to select the slave. Normally this is performed by pulling a chip select wire from its normal high state low (ground).</p><h2 id="data-transmission">Data Transmission<a href="#data-transmission" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><blockquote><p>In SPI, the master can select the clock polarity and clock phase. The CPOL bit sets the polarity of the clock signal during the idle state. The idle state is defined as the period when CS is high and transitioning to low at the start of the transmission and when CS is low and transitioning to high at the end of the transmission. The CPHA bit selects the clock phase. Depending on the CPHA bit, the rising or falling clock edge is used to sample and/or shift the data. The master must select the clock polarity and clock phase, as per the requirement of the slave. Depending on the CPOL and CPHA bit selection, four SPI modes are available.</p></blockquote><p>See <cite>https://www.analog.com/en/analog-dialogue/articles/introduction-to-spi-interface.html</cite> for a configuration list</p><h2 id="multislave-configuration">Multislave Configuration<a href="#multislave-configuration" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>Regular SPI Mode
            ┌───────────────────────────────────────&gt;┐
            |┌─────────────────────────&gt;┐         ┌──┴───┐
 _________  ||                       ┌──┴───┐     |  CS  |
|     CS0 ├&gt;┘|          |‾‾‾‾‾‾|     |  CS  | ┌──&gt;┤ SCLK |
| M   CS1 ├&gt;─┘┌────────&gt;┤ CS   | ┌──&gt;┤ SCLK | |┌─&gt;┤ SDI  |
| A   CS2 ├&gt;──┘     ┌──&gt;┤ SCLK | |┌─&gt;┤ SDI  | ||┌&lt;┤ SDO  |
| S       |         |┌─&gt;┤ SDI  | ||┌&lt;┤ SDO  | ||| |______|
| T       |         ||┌&lt;┤ SDO  | ||| |______| |||
| E  SCLK ├&gt;───┐    ||| |______| |||          |||
| R MOSI  ├&gt;─┐ └────┴))──────────┴))──────────┘||  
|   MISO  ├&lt;┐└───────┴)───────────┴)───────────┘|
 ‾‾‾‾‾‾‾‾‾  └─────────┴────────────┴────────────┘
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>Daisy Chain SPI Mode
            ┌───────────────────────────────────────&gt;┐
            |┌─────────────────────────&gt;┐         ┌──┴───┐
 _________  ||                       ┌──┴───┐     |  CS  |
|     CS0 ├&gt;┘|          |‾‾‾‾‾‾|     |  CS  | ┌──&gt;┤ SCLK |
| M   CS1 ├&gt;─┘┌────────&gt;┤ CS   | ┌──&gt;┤ SCLK | |┌─&gt;┤  SDI |
| A   CS2 ├&gt;──┘     ┌──&gt;┤ SCLK | |   | SDI  ├&lt;⌒⌒─&lt;┤  SDO |
| S       |         |   | SDI  ├&lt;⌒───┤ SDO  | ||  |______|
| T       |         | ┌&lt;┤ SDO  | |   |______| ||
| E  SCLK ├&gt;───┐    | | |______| |            ||
| R MOSI&gt; ├&gt;─┐ └────┴─)──────────┴────────────┘| 
|   MISO&lt; ├&lt;┐└────────)────────────────────────┘
 ‾‾‾‾‾‾‾‾‾  └─────────┘
</pre></table></code></div></div><h2 id="3-wire-spi">3 Wire SPI<a href="#3-wire-spi" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>In 3 Wire SPI, instead of being full duplex the transmission / receive line acts as half duplex with the input/output is shared or the peripheral device may not transmit.</p><h2 id="quad-spi">Quad SPI<a href="#quad-spi" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>In a Quad SPI mode, a master and its peripheral will have multiple data lines allowing for much faster data transmission than traditional 4 wire SPI.</p><p><cite> https://www.totalphase.com/blog/2020/05/what-are-the-differences-of-single-vs-dual-vs-quad-spi/</cite></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/spi/'>SPI</a>, <a href='/categories/embedded/'>embedded</a>, <a href='/categories/protocol/'>protocol</a>, <a href='/categories/note/'>note</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Serial Peripheral Interface - JMP_RAX&url=https://jmp-rax.github.io/posts/serial-peripheral-interface/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Serial Peripheral Interface - JMP_RAX&u=https://jmp-rax.github.io/posts/serial-peripheral-interface/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Serial Peripheral Interface - JMP_RAX&url=https://jmp-rax.github.io/posts/serial-peripheral-interface/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/universal-asynchronous-receiver-transceiver/"><div class="card-body"> <em class="timeago small" date="2022-01-10 22:22:00 -0500" >Jan 10</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Universal Asynchronous Receiver Transceiver</h3><div class="text-muted small"><p> This article is a personal note I took to help remember the gist of UART UART Universal Asynchronous Receiver/Transmitter 1 2 3 1 0 1 0 1 0 1 0 Tx ‾‾‾|_|‾|_|‾|_|‾|_|‾|_|‾‾‾‾ Rx ...</p></div></div></a></div><div class="card"> <a href="/posts/rewriting-git-history/"><div class="card-body"> <em class="timeago small" date="2021-05-27 18:27:00 -0400" >May 27, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>rewriting git history</h3><div class="text-muted small"><p> Rewriting Git History This is actually a repost of an older post I had written. Prolouge I recognized in my most recent git projects. I was using the wrong email / user information for my re...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/rewriting-git-history/" class="btn btn-outline-primary" prompt="Older"><p>rewriting git history</p></a> <a href="/posts/universal-asynchronous-receiver-transceiver/" class="btn btn-outline-primary" prompt="Newer"><p>Universal Asynchronous Receiver Transceiver</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/username">jmp_rax</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
